<#include "*/basic/default.html"/>

<#macro title>
用户登录
</#macro>

<#macro head>
<script type="text/javascript">
    function reloadCaptcha() {
        $("#captchaImg").attr("src", "get-captcha?date = " + new Date() + Math.floor(Math.random() * 24));
    }
</script>
</#macro>

<#macro body>
<div class="data-content">
    <div class="login-container">
        <div class="panel panel-default">

            <div class="panel-heading">
                <h3 class="panel-title">
                    <sapn class="glyphicon glyphicon-lock"></sapn> 用户登录
                </h3>
            </div>
            <form id="login-form" action="${base}/login" method="post">
                <input type="hidden" name="rememberMe" value="true">
                <div class="panel-body">

                    <#if shiroLoginFailure?has_content>
                        <div class="alert alert-danger fade in">
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                            <span class="glyphicon glyphicon-remove"></span> ${shiroLoginFailure}
                        </div>
                    </#if>

                    <div class="form-group">
                        <label for="username">登录帐号:</label>
                        <input type="text" class="form-control required" name="username" id="username">
                    </div>

                    <div class="form-group">
                        <label for="password">登录密码:</label>
                        <input type="password" class="form-control required" name="password" id="password">
                    </div>

                    <#if Session.incorrectNumber?? && Session.incorrectNumber gt 0>
                    <div class="form-group">
                        <label for="captcha">验证码:</label>

                        <div class="input-group">
                            <input type="text" class="form-control required" maxlength="4" title="请输入验证码" name="captcha" id="captcha">
                            <span class="input-group-addon no-padding">
                                <img id="captchaImg" src="get-captcha"/>
                            </span>
                            <span class="input-group-btn">
                                <button class="btn btn-default" type="button" onclick="reloadCaptcha();">
                                    <span class="glyphicon glyphicon-refresh"></span>
                                </button>
                            </span>
                        </div>
                    </div>
                    </#if>

                </div>

                <div class="panel-footer">
                    <button type="submit" class="btn btn-success">登录</button>
                    <button type="reset" class="btn btn-danger">重置</button>
                </div>

            </form>

        </div>
    </div>
</div>
</#macro>


